<?xml version="1.0"?>

<robot name="lamp_robot" xmlns:xacro="http://ros.org/wiki/xacro">
    
    

<xacro:macro name="lamp" params="prefix x y z theta">
    <xacro:property name="mesh_dir" value="package://env_description/singleobj3_env/assets/interactive/lamp_sapien/textured_objs" />
    <link name="${prefix}_base_link"/>
    <joint name="${prefix}_base_joint" type="fixed">
      <origin xyz="${x} ${y} ${z}" rpy="0 0 ${theta}" />
      <parent link="world" />
      <child link="${prefix}_base_link" />
      <axis xyz="0 0 0" />
    </joint>
    <link name="${prefix}_lamp_mount">
      <visual>
        <origin rpy="0 0 0" xyz="0 0 0."/>
        <geometry>
          <cylinder radius="0.05" length="0.02"/>
        </geometry>
      </visual>
      <collision>
          <origin rpy="0 0 0" xyz="0 0 0"/>
          <geometry>
            <cylinder radius="0.05" length="0.02"/>
          </geometry>
      </collision>
    </link>
    <joint name="${prefix}_base_mount_joint" type="revolute">
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <parent link="${prefix}_base_link"/>
      <child link="${prefix}_lamp_mount"/>
      <axis xyz="0 0 1"/>
      <limit lower="-3.1415" upper="3.1415" effort="30" velocity="10" />
    </joint>

    <link name="${prefix}_lamp_link_0">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0.16"/>
            <geometry>
                <cylinder radius="0.005" length="0.32"/>
            </geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0.16"/>
            <geometry>
                <cylinder radius="0.04" length="0.36"/>
            </geometry>
        </collision>
    </link>

    <joint name="${prefix}_mount_link_0_joint" type="revolute">
      <origin rpy="0 -0.52359877559  0" xyz="0.05 0 0"/>
      <parent link="${prefix}_lamp_mount"/>
      <child link="${prefix}_lamp_link_0"/>
      <axis xyz="0 1 0"/>
      <limit lower="0" upper="1.57079632679" effort="30" velocity="10" />
    </joint>

    <link name="${prefix}_lamp_link_1">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0.16"/>
            <geometry>
                <cylinder radius="0.005" length="0.32"/>
            </geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0.16"/>
            <geometry>
                <cylinder radius="0.04" length="0.36"/>
            </geometry>
        </collision>
    </link>

    <joint name="${prefix}_link_0_link_1_joint" type="revolute">
      <origin rpy="0 3.14159265359   0" xyz="0 0 0.34"/>
      <parent link="${prefix}_lamp_link_0"/>
      <child link="${prefix}_lamp_link_1"/>
      <axis xyz="0 1 0"/>
      <limit lower="-3.14159265359" upper="0" effort="30" velocity="10" />
    </joint>

    <link name="${prefix}_lamp_link_2">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0.015"/>
            <geometry>
                <cylinder radius="0.005" length="0.03"/>
            </geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0.015"/>
            <geometry>
                <cylinder radius="0.01" length="0.03"/>
            </geometry>
        </collision>
    </link>

    <joint name="${prefix}_link_1_link_2_joint" type="revolute">
      <origin rpy="0 -1.0471975512 0" xyz="0 0 0.35"/>
      <parent link="${prefix}_lamp_link_1"/>
      <child link="${prefix}_lamp_link_2"/>
      <axis xyz="0 1 0"/>
      <limit lower="-0.6" upper="1.0471975512" effort="30" velocity="10" />
    </joint>
    <link name="${prefix}_lamp_bubble">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 -0.02"/>
            <geometry>
                <cylinder radius="0.04" length="0.09"/>
            </geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 -0.02"/>
            <geometry>
                <cylinder radius="0.045" length="0.095"/>
            </geometry>
        </collision>
    </link>

    <joint name="${prefix}_link_2_bubble_joint" type="revolute">
      <origin rpy="0 1.57 0" xyz="0 0 0.07"/>
      <parent link="${prefix}_lamp_link_2"/>
      <child link="${prefix}_lamp_bubble"/>
      <axis xyz="1 0 0"/>
      <limit lower="-1.57" upper="1.57" effort="30" velocity="10" />
    </joint>

    <link name="${prefix}_lamp_shade">
        <visual>
            <origin rpy="0 0 0" xyz="0 0 0"/>
           <geometry>
				<mesh filename="${mesh_dir}/cone.obj" scale="0.08 0.08 0.08"/>
			</geometry>
        </visual>
        <collision>
            <origin rpy="0 0 0" xyz="0 0 0"/>
            <geometry>
				<mesh filename="${mesh_dir}/cone.obj" scale="0.08 0.08 0.08"/>
			</geometry>
        </collision>
    </link>

    <joint name="${prefix}_bubble_shade_joint" type="fixed">
        <origin rpy="-1.57 0 0" xyz="0 0 0"/>
        <parent link="${prefix}_lamp_bubble"/>
        <child link="${prefix}_lamp_shade"/>
        <axis xyz="0 1 0"/>
        <limit lower="2.35619449019" upper="0" effort="30" velocity="10" />
    </joint>

    <link name="${prefix}_lamp_handle"/>

    <joint name="${prefix}_shade_handle_joint" type="fixed">
        <origin xyz="0 0 0" rpy="-1.57 3.14159 0"/>
        <parent link="${prefix}_lamp_shade"/>
        <child link="${prefix}_lamp_handle"/>
    </joint>





    
    
    
    
    
    
    
    
    
   

</xacro:macro>
    

</robot>